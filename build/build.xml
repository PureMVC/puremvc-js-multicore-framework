<?xml version="1.0" encoding="UTF-8"?>
<project name="org.puremvc.js-standard" basedir="../" default="packageLibrary">

	<property file="${basedir}/bin/build.properties"/>	
	<target name="packageLibrary" description="Package the PureMVC library">
				
		<!-- define the Google Closure compiler task -->
		<taskdef name="jscomp" classname="com.google.javascript.jscomp.ant.CompileTask" classpath="${google.closure.classpath}"/>
		<delete>
           <fileset dir="${basedir}/bin" includes="*.js"/>
        </delete>
		
		<!-- define the scripts and their ordering for concatenation -->
		<concat
			destfile="${basedir}/bin/${library.name}.js"
			append="no"
			encoding="UTF-8"
			outputencoding="UTF-8"
			fixlastline="true">
			<path>
				<pathelement location="${basedir}/templates/libraryTemplate.header.inc"/>
				<pathelement location="${basedir}/src/org/puremvc/js/multicore/patterns/observer/Observer.js" />
				<pathelement location="${basedir}/src/org/puremvc/js/multicore/patterns/observer/Notification.js" />
				<pathelement location="${basedir}/src/org/puremvc/js/multicore/patterns/observer/Notifier.js" />
				<pathelement location="${basedir}/src/org/puremvc/js/multicore/help/adapters/NotifierAdapter.js" />
				<pathelement location="${basedir}/src/org/puremvc/js/multicore/patterns/command/SimpleCommand.js" />
				<pathelement location="${basedir}/src/org/puremvc/js/multicore/patterns/command/MacroCommand.js" />
				<pathelement location="${basedir}/src/org/puremvc/js/multicore/patterns/mediator/Mediator.js" />
				<pathelement location="${basedir}/src/org/puremvc/js/multicore/patterns/proxy/Proxy.js" />
				<pathelement location="${basedir}/src/org/puremvc/js/multicore/patterns/facade/Facade.js" />
				<pathelement location="${basedir}/src/org/puremvc/js/multicore/core/View.js" />
				<pathelement location="${basedir}/src/org/puremvc/js/multicore/core/Model.js" />
				<pathelement location="${basedir}/src/org/puremvc/js/multicore/core/Controller.js" />
				<pathelement location="${basedir}/Build/templates/libraryTemplate.footer.inc"/>
			</path>
		</concat>
		
		<!-- define the Google Closure compression settings -->
		<jscomp compilationLevel="${google.closure.complevel}" 
				warning="${google.closure.warnlevel}"
				debug="false" 
				output="${basedir}/bin/${library.name}_Mini.js">
			
			<sources dir="${basedir}/bin/">
				<file name="${library.name}.js"/>
			</sources>
		</jscomp>
	</target>
</project>