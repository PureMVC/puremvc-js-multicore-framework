Ext.namespace("Puremvc.core");Puremvc.core.Model=Ext.extend(Object,{proxyMap:{},constructor:function(){if(Puremvc.core.Model._instance!=null){throw Error(Puremvc.core.Model._SINGLETON_MSG);}this.initializeModel();Puremvc.core.Model._instance=this;},registerProxy:function(proxy){this.proxyMap[proxy.getProxyName()]=proxy;proxy.onRegister();},retrieveProxy:function(proxyName){return this.proxyMap[proxyName];},hasProxy:function(proxyName){return this.proxyMap[proxyName]!=null;},removeProxy:function(proxyName){var proxy=this.proxyMap[proxyName];if(proxy){delete this.proxyMap[proxyName];proxy.onRemove();}return proxy;},initializeModel:function(){}});Ext.apply(Puremvc.core.Model,{_SINGLETON_MSG:"Model Singleton already constructed!",_instance:new Puremvc.core.Model(),getInstance:function(){return Puremvc.core.Model._instance;}});Ext.namespace("Puremvc.core");Puremvc.core.View=Ext.extend(Object,{mediatorMap:{},observerMap:{},constructor:function(){if(Puremvc.core.View._instance!=null){throw Error(Puremvc.core.View._SINGLETON_MSG);}this.initializeView();Puremvc.core.View._instance=this;},initializeView:function(){},registerObserver:function(notificationName,observer){var observers=this.observerMap[notificationName];if(observers){observers.push(observer);}else{this.observerMap[notificationName]=[observer];}},notifyObservers:function(notification){var name=notification.getName();if(this.observerMap[name]!=null){var observers=this.observerMap[name].concat();var len=observers.length;for(var i=0;i<len;i++){var observer=observers[i];observer.notifyObserver(notification);}}},removeObserver:function(notificationName,notifyContext){var observers=this.observerMap[notificationName];var i=observers.length;while(i--){var observer=observers[i];if(observer.compareNotifyContext(notifyContext)){observers.splice(i,1);break;}}if(!observers.length){delete this.observerMap[notificationName];}},registerMediator:function(mediator){var name=mediator.getMediatorName();if(!this.mediatorMap[name]){this.mediatorMap[name]=mediator;var interests=mediator.listNotificationInterests();var len=interests.length;if(len){var observer=new Puremvc.patterns.Observer(mediator.handleNotification,mediator);for(var i=0;i<len;i++){this.registerObserver(interests[i],observer);}}mediator.onRegister();}},retrieveMediator:function(mediatorName){return this.mediatorMap[mediatorName];},removeMediator:function(mediatorName){var mediator=this.mediatorMap[mediatorName];if(mediator){var interests=mediator.listNotificationInterests();var i=interests.length;while(i--){this.removeObserver(interests[i],mediator);}delete this.mediatorMap[mediatorName];mediator.onRemove();}return mediator;},hasMediator:function(mediatorName){return this.mediatorMap[mediatorName]!=null;}});Ext.apply(Puremvc.core.View,{_SINGLETON_MSG:"View Singleton already constructed!",_instance:new Puremvc.core.View(),getInstance:function(){return Puremvc.core.View._instance;}});Ext.namespace("Puremvc.core");Puremvc.core.Controller=Ext.extend(Object,{view:null,commandMap:{},constructor:function(){if(Puremvc.core.Controller._instance!=null){throw Error(Puremvc.core.Controller._SINGLETON_MSG);}this.initializeController();Puremvc.core.Controller._instance=this;},initializeController:function(){this.view=Puremvc.core.View.getInstance();},executeCommand:function(note){var commandClassRef=this.commandMap[note.getName()];if(commandClassRef){var command=new commandClassRef();command.execute(note);}},registerCommand:function(notificationName,commandClassRef){if(!this.commandMap[notificationName]){this.view.registerObserver(notificationName,new Puremvc.patterns.Observer(this.executeCommand,this));}this.commandMap[notificationName]=commandClassRef;},hasCommand:function(notificationName){return this.commandMap[notificationName]!=null;},removeCommand:function(notificationName){if(this.hasCommand(notificationName)){this.view.removeObserver(notificationName,this);delete this.commandMap[notificationName];}}});Ext.apply(Puremvc.core.Controller,{_SINGLETON_MSG:"Controller Singleton already constructed!",_instance:new Puremvc.core.Controller(),getInstance:function(){return Puremvc.core.Controller._instance;}});Ext.namespace("Puremvc.patterns");Puremvc.patterns.Facade=Ext.extend(Object,{view:null,model:null,controller:null,constructor:function(){Puremvc.patterns.Facade.superclass.constructor.call(this);this.initializeFacade();},initializeFacade:function(){this.initializeModel();this.initializeController();this.initializeView();},initializeModel:function(){this.model=Puremvc.core.Model.getInstance();},initializeController:function(){this.controller=Puremvc.core.Controller.getInstance();},initializeView:function(){this.view=Puremvc.core.View.getInstance();},registerCommand:function(notificationName,commandClassRef){this.controller.registerCommand(notificationName,commandClassRef);},removeCommand:function(notificationName){this.controller.removeCommand(notificationName);},hasCommand:function(notificationName){return this.controller.hasCommand(notificationName);},registerProxy:function(proxy){this.model.registerProxy(proxy);},retrieveProxy:function(proxyName){return this.model.retrieveProxy(proxyName);},removeProxy:function(proxyName){this.model.removeProxy(proxyName);},hasProxy:function(proxyName){return this.model.hasProxy(proxyName);},registerMediator:function(mediator){this.view.registerMediator(mediator);},retrieveMediator:function(mediatorName){return this.view.retrieveMediator(mediatorName);},removeMediator:function(mediatorName){return this.view.removeMediator(mediatorName);},hasMediator:function(mediatorName){return this.view.hasMediator(mediatorName);},sendNotification:function(notificationName,body,type){this.notifyObservers(new Puremvc.patterns.Notification(notificationName,body,type));},notifyObservers:function(notification){this.view.notifyObservers(notification);}});Ext.apply(Puremvc.patterns.Facade,{_instance:null});Ext.apply(Puremvc.patterns.Facade,{getInstance:function(){if(Puremvc.patterns.Facade._instance===null){Puremvc.patterns.Facade._instance=new Puremvc.patterns.Facade();}return Puremvc.patterns.Facade._instance;}});Ext.namespace("Puremvc.patterns");Puremvc.patterns.Notifier=Ext.extend(Object,{constructor:function(){Puremvc.patterns.Notifier.superclass.constructor.call(this);this.facade=Puremvc.patterns.Facade.getInstance();},sendNotification:function(notificationName,body,type){this.facade.sendNotification(notificationName,body,type);}});Ext.namespace("Puremvc.patterns");Puremvc.patterns.Mediator=Ext.extend(Puremvc.patterns.Notifier,{constructor:function(mediatorName,viewComponent){Puremvc.patterns.Mediator.superclass.constructor.call(this);this.mediatorName=(mediatorName!=null)?mediatorName:Puremvc.patterns.Mediator.NAME;this.viewComponent=viewComponent;},listNotificationInterests:function(){return[];},getMediatorName:function(){return this.mediatorName;},getViewComponent:function(){return this.viewComponent;},setViewComponent:function(viewComponent){this.viewComponent=viewComponent;},handleNotification:function(notification){},onRegister:function(){},onRemove:function(){}});Ext.apply(Puremvc.patterns.Mediator,{NAME:"Mediator"});Ext.namespace("Puremvc.patterns");Puremvc.patterns.Notification=Ext.extend(Object,{constructor:function(name,body,type){Puremvc.patterns.Notification.superclass.constructor.call(this);this.name=name;this.body=body;this.type=type;},getName:function(){return this.name;},setBody:function(body){this.body=body;},getBody:function(){return this.body;},setType:function(type){this.type=type;},getType:function(){return this.type;},toString:function(){var msg="Notification Name: "+this.getName();msg+="\nBody:"+((this.body==null)?"null":this.body.toString());msg+="\nType:"+((this.type==null)?"null":this.type);return msg;}});Ext.namespace("Puremvc.patterns");Puremvc.patterns.Observer=Ext.extend(Object,{constructor:function(notifyMethod,notifyContext){Puremvc.patterns.Observer.superclass.constructor.call(this);this.notify=notifyMethod;this.context=notifyContext;},setNotifyMethod:function(notifyMethod){this.notify=notifyMethod;},setNotifyContext:function(notifyContext){this.context=notifyContext;},getNotifyMethod:function(){return this.notify;},getNotifyContext:function(){return this.context;},notifyObserver:function(notification){this.notify.apply(this.context,[notification]);},compareNotifyContext:function(object){return object===this.context;}});Ext.namespace("Puremvc.patterns");Puremvc.patterns.MacroCommand=Ext.extend(Puremvc.patterns.Notifier,{subCommands:[],constructor:function(){Puremvc.patterns.MacroCommand.superclass.constructor.call(this);this.initializeMacroCommand();},initializeMacroCommand:function(){},addSubCommand:function(commandClassRef){this.subCommands.push(commandClassRef);},execute:function(notification){var len=this.subCommands.length;for(var i=0;i<len;i++){var commandClassRef=this.subCommands[i];var commandInstance=new commandClassRef();commandInstance.execute(notification);}}});Ext.namespace("Puremvc.patterns");Puremvc.patterns.SimpleCommand=Ext.extend(Puremvc.patterns.Notifier,{constructor:function(){Puremvc.patterns.SimpleCommand.superclass.constructor.call(this);},execute:function(notification){}});Ext.namespace("Puremvc.patterns");Puremvc.patterns.Proxy=Ext.extend(Puremvc.patterns.Notifier,{constructor:function(proxyName,data){Puremvc.patterns.Proxy.superclass.constructor.call(this);this.proxyName=(proxyName!=null)?proxyName:Puremvc.patterns.Proxy.NAME;if(data!=null){this.data=data;}},getProxyName:function(){return this.proxyName;},setData:function(data){this.data=data;},getData:function(){return this.data;},onRegister:function(){},onRemove:function(){}});Ext.apply(Puremvc.patterns.Proxy,{NAME:"Proxy"});